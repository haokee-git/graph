# 修改计划：优化物理模拟与交互

根据您的需求，我制定了以下修改计划：

## 1. 物理引擎修改 (`src/engine/PhysicsEngine.ts`)

*   **增强弹力**：将 `STIFFNESS` (劲度系数) 从 `0.05` 提高到 `0.8` 左右，解决“肌无力”问题。
*   **优化绳索模拟**：
    *   添加 `targetSegmentCount` 属性，用于控制绳索的分段数量。
    *   修改 `addEdge` 方法，不再根据长度自动计算段数，而是使用 `targetSegmentCount`（默认 100）。
    *   添加 `reconfigureEdges()` 方法，用于在用户调整段数时重新生成所有边的粒子。
*   **修复碰撞检测**：
    *   在 `update` 循环中增加**硬碰撞检测**逻辑。
    *   检测两点间距离是否小于两者半径之和 (`dist < r1 + r2`)。
    *   如果发生重叠，直接修改节点位置将其分离，防止“小球藏进大球”。

## 2. UI 界面修改 (`src/App.tsx`)

*   **添加控制项**：
    *   在左侧控制面板增加“绳索段数”滑块 (Slider) 或输入框。
    *   范围可设为 10 ~ 200，默认 100。
*   **联动逻辑**：
    *   当用户调整段数时，实时调用引擎的 `reconfigureEdges()` 更新显示。

## 3. 重启服务

*   修改完成后，执行构建 (`npm run build`)。
*   重启后台服务器，确保更改生效。
